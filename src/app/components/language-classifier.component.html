<div class="language-classifier-container">
  <!-- BWKI2025 Submission Banner -->
  <div class="bwki-banner">
    <div class="banner-content">
      <h3>🏆 {{ 'banner.title' | translate }}</h3>
      <p>{{ 'banner.description' | translate }}</p>
      <p><strong>{{ 'banner.note_label' | translate }}:</strong> {{ 'banner.note' | translate }} ⏱️</p>
    </div>
  </div>

  <div class="classifier-card">
    <div class="card-header">
      <div class="title-section">
        <h2>{{ 'results.title' | translate }}</h2>
        <p>{{ 'about.description' | translate }}</p>
      </div>
      <p-button
        icon="pi pi-cog"
        [text]="true"
        [rounded]="true"
        class="settings-btn"
        (onClick)="showSettings = true"
        [disabled]="isLoading"
        pTooltip="Settings">
      </p-button>
    </div>

    <app-language-examples
      [examples]="examples"
      [disabled]="isLoading"
      (exampleSelected)="useExample($event)">
    </app-language-examples>

    <div class="input-section">
      <div class="input-wrapper">
        <textarea
          pInputTextarea
          [(ngModel)]="inputText"
          [placeholder]="'input.placeholder' | translate"
          class="text-input"
          [disabled]="isLoading"
          rows="4">
        </textarea>
        <div class="input-actions">
          <p-button
            [label]="'button.clear' | translate"
            [text]="true"
            [size]="'small'"
            (onClick)="clearText()"
            [disabled]="!inputText.trim() || isLoading"
            class="clear-btn">
          </p-button>
          <p-button
            [label]="'button.classify' | translate"
            (onClick)="classifyText()"
            [loading]="isLoading"
            [disabled]="!inputText.trim() || !backendUrl.trim()"
            class="classify-btn"
            icon="pi pi-search">
          </p-button>
        </div>
      </div>
    </div>

    <app-loading-spinner
      *ngIf="isLoading"
      size="medium"
      [message]="'status.loading' | translate">
    </app-loading-spinner>

    <app-classification-results
      *ngIf="filteredClassifications.length > 0 && !isLoading"
      [results]="filteredClassifications"
      [writingSystem]="writingSystem"
      [chartData]="chartData"
      [chartOptions]="chartOptions">
    </app-classification-results>

    <div class="error-section" *ngIf="errorMessage">
      <p-message
        severity="error"
        [text]="errorMessage"
        class="error-message">
      </p-message>
    </div>
  </div>

  <p-dialog
    [(visible)]="showSettings"
    [header]="'settings.title' | translate"
    [modal]="true"
    [draggable]="false"
    [resizable]="false"
    styleClass="settings-dialog"
    [style]="{width: '90vw', maxWidth: '500px'}">

    <div class="settings-content">
      <div class="setting-group">
        <label>{{ 'settings.backend_url' | translate }}</label>
        <input
          type="url"
          pInputText
          [(ngModel)]="backendUrl"
          [placeholder]="'settings.backend_url.placeholder' | translate"
          [disabled]="isLoading"
          class="url-input">
      </div>
    </div>
  </p-dialog>
</div>
